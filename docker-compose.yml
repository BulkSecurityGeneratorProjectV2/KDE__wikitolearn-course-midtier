version: '3.4'
services:
  course-midtier:
    build:
      context: .
      args:
        SERVICE_PORT: ${SERVICE_PORT}
    image: wikitolearn/course-midtier
    environment:
      KEYCLOAK_URI: ${KEYCLOAK_URI}
      COURSES_BACKEND_URI: ${COURSES_BACKEND_URI}
      CHAPTERS_BACKEND_URI: ${CHAPTERS_BACKEND_URI}
      PAGES_BACKEND_URI: ${PAGES_BACKEND_URI}
      SERVICE_PORT: ${SERVICE_PORT}
    ports:
      - ${SERVICE_PORT}:${SERVICE_PORT}
    restart: on-failure